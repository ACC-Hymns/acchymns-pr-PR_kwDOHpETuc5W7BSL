import{d as T,a as H,C as E,$ as L,r as R,K as V,e as c,f as e,E as D,Q as U,k as h,F as w,l as y,h as r,m as v,w as d,a0 as b,n as i,i as x,a1 as S,R as f,s as A,v as F,y as N,z as O,a2 as P,B as W}from"./index-6cf0da3a.js";import{_ as j}from"./chevron-back-outline-a1cf55c8.js";import{_ as q}from"./home-outline-16403da4.js";import{_ as z}from"./settings-63b40dc5.js";import{T as _}from"./index-303ce190.js";import{u as K}from"./navigator-761ba8a3.js";import{u as M}from"./preferences-63d29ac4.js";const Q="/acchymns-pr-PR_kwDOHpETuc5W7BSL/assets/enter-outline.svg",C="/acchymns-pr-PR_kwDOHpETuc5W7BSL/assets/alert-circle-outline.svg",G="/acchymns-pr-PR_kwDOHpETuc5W7BSL/assets/close.svg",s=u=>(A("data-v-2ebe20d3"),u=u(),F(),u),J={class:"menu"},X={class:"title"},Y=s(()=>e("h1",{class:"title--center"},"Import Hymnals",-1)),Z={class:"main-content"},ee={class:"input-option reference-option"},te=["disabled"],se=s(()=>e("img",{class:"ionicon enter-button-icon",src:Q},null,-1)),oe=[se],ne={key:0},ae={key:1,class:"warning-label-container"},ie=s(()=>e("img",{class:"ionicon warning-icon",src:C},null,-1)),le=s(()=>e("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ce=[ie,le],re=["onClick"],_e=s(()=>e("img",{class:"ionicon ionicon-custom booktext--right add-button-icon",src:P},null,-1)),de=[_e],ue={key:2},me={key:3,class:"warning-label-container"},pe=s(()=>e("img",{class:"ionicon warning-icon",src:C},null,-1)),he=s(()=>e("h5",{class:"warning-label"},"The hymnals below require an internet connection",-1)),ve=[pe,he],fe={style:{"padding-bottom":"200px"}},we=["onClick"],ge=s(()=>e("img",{class:"ionicon ionicon-custom add-button-icon",src:G},null,-1)),ke=[ge],ye={class:"nav"},be=s(()=>e("img",{class:"ionicon nav__icon",src:q},null,-1)),xe=s(()=>e("span",{class:"nav__text"},"Home",-1)),Se=s(()=>e("img",{class:"ionicon nav__icon",src:N},null,-1)),Ce=s(()=>e("span",{class:"nav__text"},"Search",-1)),Ie=s(()=>e("img",{class:"ionicon nav__icon",src:O},null,-1)),$e=s(()=>e("span",{class:"nav__text"},"Bookmarks",-1)),Be=s(()=>e("img",{class:"ionicon nav__icon--active",src:z},null,-1)),Te=s(()=>e("span",{class:"nav__text"},"Settings",-1)),He=T({__name:"SettingsImportView",setup(u){K();const a=M("externalBooks",[]);let g=H("import_books_tooltip_complete",!1);const m=E(()=>Object.values(L).filter(o=>!a.value.includes(o))),p=R("");async function k(o,n=!0){let t=null;try{const l=new AbortController,B=setTimeout(()=>l.abort(),2e3);t=await fetch(o+"/summary.json",{method:"HEAD",signal:l.signal}),clearTimeout(B)}catch(l){if(l.name=="TypeError")return await _.show({text:"Failed to load hymnal!"}),!1;if(l.name!="AbortError")throw l}return t==null||!t.ok||t.status!=200?(await _.show({text:"Failed to load hymnal!"}),!1):a.value.includes(o)?(await _.show({text:"Hymnal already imported!"}),!1):(a.value.push(o),n&&await _.show({text:"Successfully imported hymnal!"}),!0)}async function I(o){if(o in b){const n=b[o];a.value.includes(n)?await _.show({text:`Hymnal (${o}) already imported!`}):await k(n,!1)&&await _.show({text:`Successfully imported hymnal (${o})!`})}else await _.show({text:`Unknown hymnal reference (${o})!`})}V(()=>{g.value||(g.value=!0)});function $(o){a.value=a.value.filter(n=>n!=o)}return(o,n)=>(i(),c(w,null,[e("div",J,[e("div",X,[e("img",{onClick:n[0]||(n[0]=t=>o.$router.back()),class:"ionicon title--left",src:j}),Y])]),e("div",Z,[e("div",ee,[D(e("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>p.value=t),type:"text",class:"search-bar",placeholder:"Reference"},null,512),[[U,p.value,void 0,{trim:!0}]]),e("a",{disabled:p.value.length===0,onClick:n[2]||(n[2]=t=>I(p.value)),class:"reference-button"},oe,8,te)]),m.value.length!=0?(i(),c("h2",ne,"Available Hymnals")):h("",!0),m.value.length!=0?(i(),c("div",ae,ce)):h("",!0),e("div",null,[(i(!0),c(w,null,y(m.value,t=>(i(),x(S,{key:t,src:t,"with-link":!1},{default:d(()=>[e("button",{onClick:l=>k(t)},de,8,re)]),_:2},1032,["src"]))),128))]),r(a).length!=0?(i(),c("h2",ue,"Imported Hymnals")):h("",!0),r(a).length!=0&&m.value.length==0?(i(),c("div",me,ve)):h("",!0),e("div",fe,[(i(!0),c(w,null,y(r(a),t=>(i(),x(S,{id:"import-book",key:t,src:t,"with-link":!1},{default:d(()=>[e("button",{onClick:l=>$(t)},ke,8,we)]),_:2},1032,["src"]))),128))])]),e("nav",ye,[v(r(f),{to:"/",class:"nav__link"},{default:d(()=>[be,xe]),_:1}),v(r(f),{to:"/search",class:"nav__link"},{default:d(()=>[Se,Ce]),_:1}),v(r(f),{to:"/bookmarks",class:"nav__link"},{default:d(()=>[Ie,$e]),_:1}),v(r(f),{to:"/settings",class:"nav__link nav__link--active"},{default:d(()=>[Be,Te]),_:1})])],64))}});const Fe=W(He,[["__scopeId","data-v-2ebe20d3"]]);export{Fe as default};
